@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');

:root {
  --bg: #090b10;
  --bg-grad-a: rgba(255, 122, 24, 0.24);
  --bg-grad-b: rgba(255, 178, 102, 0.18);
  --surface: rgba(17, 20, 29, 0.62);
  --surface-strong: rgba(28, 33, 45, 0.78);
  --surface-soft: rgba(255, 255, 255, 0.05);
  --border: rgba(255, 255, 255, 0.14);
  --text-primary: #f7f8fc;
  --text-secondary: #b3bbcc;
  --accent: #ff7a18;
  --accent-soft: rgba(255, 122, 24, 0.18);
  --danger: #ff5f6d;
  --success: #3ddc97;
  --shadow: 0 20px 60px rgba(2, 5, 12, 0.45);
  --radius: 18px;
  --blur: 22px;
}

body[data-theme='light'] {
  --bg: #f5f7fb;
  --bg-grad-a: rgba(255, 122, 24, 0.2);
  --bg-grad-b: rgba(255, 182, 122, 0.24);
  --surface: rgba(255, 255, 255, 0.76);
  --surface-strong: rgba(255, 255, 255, 0.94);
  --surface-soft: rgba(255, 255, 255, 0.6);
  --border: rgba(123, 134, 158, 0.22);
  --text-primary: #121722;
  --text-secondary: #4f5b73;
  --shadow: 0 18px 45px rgba(69, 84, 115, 0.16);
}

* { box-sizing: border-box; }
html, body { margin: 0; min-height: 100%; }
body {
  font-family: Inter, system-ui, sans-serif;
  color: var(--text-primary);
  background:
    radial-gradient(circle at 10% 0%, var(--bg-grad-a), transparent 35%),
    radial-gradient(circle at 90% 20%, var(--bg-grad-b), transparent 42%),
    var(--bg);
}

a { color: inherit; }
.container { max-width: 1200px; margin: 0 auto; padding: 0 clamp(14px, 2vw, 24px); }
.main-content {
  margin: 96px auto 24px;
  padding: clamp(10px, 1.2vw, 16px) clamp(14px, 2vw, 24px) 24px;
  max-width: 1200px;
  display: grid;
  gap: 16px;
}

.top-nav {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: 100;
  backdrop-filter: blur(var(--blur));
  -webkit-backdrop-filter: blur(var(--blur));
  background: var(--surface);
  border-bottom: 1px solid var(--border);
}
.nav-inner {
  min-height: 74px;
  display: grid;
  grid-template-columns: 44px 1fr auto;
  align-items: center;
  gap: 12px;
}
.top-nav-title { margin: 0; font-size: clamp(1.1rem, 2vw, 1.55rem); font-weight: 700; }

.mobile-nav-toggle, .theme-toggle {
  width: 42px;
  height: 42px;
  border-radius: 12px;
  border: 1px solid var(--border);
  background: var(--surface-soft);
  color: var(--text-primary);
  cursor: pointer;
}
.mobile-nav-toggle { display: grid; place-content: center; gap: 5px; padding: 0 10px; }
.mobile-nav-toggle span { width: 100%; height: 2px; background: currentColor; border-radius: 6px; }
body.nav-open .mobile-nav-toggle span:nth-child(1) { transform: translateY(7px) rotate(45deg); }
body.nav-open .mobile-nav-toggle span:nth-child(2) { opacity: 0; }
body.nav-open .mobile-nav-toggle span:nth-child(3) { transform: translateY(-7px) rotate(-45deg); }

.side-nav-overlay {
  position: fixed; inset: 0; z-index: 110;
  background: rgba(0,0,0,.38); opacity: 0; pointer-events: none;
  transition: .2s;
}
.side-nav {
  position: fixed;
  inset: 0 auto 0 0;
  width: min(88vw, 320px);
  z-index: 120;
  padding: 16px;
  transform: translateX(-105%);
  transition: .22s ease;
  display: grid;
  grid-template-rows: auto auto 1fr auto;
  gap: 12px;
  background: var(--surface);
  border-right: 1px solid var(--border);
  backdrop-filter: blur(calc(var(--blur) + 4px));
}
body.nav-open .side-nav { transform: translateX(0); }
body.nav-open .side-nav-overlay { opacity: 1; pointer-events: auto; }

.side-nav-brand { display: flex; align-items: center; gap: 10px; font-weight: 800; }
.side-nav-brand img { width: 34px; height: 34px; }
.side-nav-user {
  display: flex; align-items: center; gap: 10px; text-decoration: none;
  background: var(--surface-soft); border: 1px solid var(--border); border-radius: 14px; padding: 10px;
}
.user-avatar, .worker-avatar {
  width: 38px; height: 38px; border-radius: 50%;
  display: grid; place-items: center; font-weight: 700;
  background: linear-gradient(160deg, rgba(255,122,24,.5), rgba(255,170,91,.2));
  border: 1px solid rgba(255,122,24,.45);
}
.side-nav-links { display: grid; gap: 6px; align-content: start; overflow: auto; }
.nav-link {
  text-decoration: none;
  color: var(--text-secondary);
  border-radius: 12px;
  padding: 11px 12px;
  font-weight: 600;
  border: 1px solid transparent;
}
.nav-link:hover, .nav-link.active {
  color: var(--text-primary);
  background: var(--accent-soft);
  border-color: rgba(255,122,24,.38);
}

.theme-toggle { font-size: 18px; }

.card, .worker-card, .info-card, .placeholder-card, .table-row, .center-card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  backdrop-filter: blur(var(--blur));
  -webkit-backdrop-filter: blur(var(--blur));
}
.card, .worker-card, .info-card, .placeholder-card, .timesheet-card { padding: clamp(14px, 2vw, 20px); }

.page-header, .card-header, .profile-header-container, .worker-card-header { display: flex; gap: 10px; align-items: center; justify-content: space-between; flex-wrap: wrap; }
.page-header h1, .center-card h2 { margin: 0; font-size: clamp(1.2rem, 3vw, 1.8rem); }
.card-header { margin-bottom: 8px; }

.metric { padding: 12px; border-radius: 14px; background: var(--surface-soft); border: 1px solid var(--border); }
.metric .label { color: var(--text-secondary); font-size: .8rem; }
.metric .value { font-size: clamp(1.2rem, 3vw, 1.9rem); font-weight: 800; }
.metric .trend.up { color: var(--success); }
.metric .trend.down { color: var(--danger); }

.form-grid, .form-grid-edit, .timesheet-form, .workers-grid, .compact-grid { display: grid; gap: 12px; }
.form-grid, .form-grid-edit, .timesheet-form { grid-template-columns: repeat(2, minmax(0,1fr)); }
.workers-grid, .compact-grid { grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); }
.form-group, .form-group-edit, .timesheet-span-2 { display: flex; flex-direction: column; gap: 6px; }
.timesheet-span-2 { grid-column: 1 / -1; }

input, select, textarea, .form-control {
  width: 100%;
  background: var(--surface-strong);
  color: var(--text-primary);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 11px 12px;
}
input:focus, select:focus, textarea:focus {
  outline: none;
  border-color: rgba(255,122,24,.55);
  box-shadow: 0 0 0 4px rgba(255,122,24,.18);
}

.btn {
  display: inline-flex; align-items: center; justify-content: center;
  text-decoration: none; gap: 6px;
  border-radius: 12px;
  border: 1px solid var(--border);
  padding: 10px 14px;
  font-weight: 700;
  cursor: pointer;
}
.btn-primary { background: linear-gradient(135deg, #ff7a18, #ff9a3d); border-color: transparent; color: #fff; }
.btn-secondary { background: var(--surface-soft); color: var(--text-primary); }
.btn-danger { background: linear-gradient(135deg, #ff5f6d, #ff2e4a); border-color: transparent; color: #fff; }
.btn-mini { padding: 8px 10px; }

.table-scroll, .timesheet-table-wrap { overflow: auto; border-radius: 14px; }
.table, .timesheet-matrix { width: 100%; border-collapse: separate; border-spacing: 0 8px; }
.table th, .table td, .timesheet-matrix th, .timesheet-matrix td { padding: 9px 10px; font-size: .92rem; }
.table tbody tr, .timesheet-matrix tr { background: var(--surface-soft); }

.status-badge { display: inline-flex; align-items: center; gap: 6px; border-radius: 999px; padding: 5px 10px; font-size: .76rem; }
.status-badge.active, .status-badge.online { background: rgba(61,220,151,.16); color: var(--success); }
.status-badge.offline { background: rgba(255,95,109,.16); color: var(--danger); }
.status-badge.warning { background: rgba(255,122,24,.16); color: var(--accent); }

.schedule-day-group, .assignment-card, .structured-assignment, .assignment-meta, .assignment-note, .detail-row {
  border: 1px solid var(--border);
  background: var(--surface-soft);
  border-radius: 14px;
}
.schedule-day-group { padding: 10px; display: grid; gap: 10px; }
.schedule-day-list, .schedule-vertical, .dashboard-stats { display: grid; gap: 10px; }
.assignment-card, .structured-assignment { padding: 12px; }
.assignment-head { display: flex; justify-content: space-between; gap: 8px; flex-wrap: wrap; }
.assignment-head span { color: var(--accent); font-weight: 700; }
.assignment-meta, .assignment-note { padding: 8px 10px; }
.assignment-meta span, .assignment-note span, .text-muted, .back-link { color: var(--text-secondary); }

.floating-create-wrap {
  position: fixed; right: 14px; bottom: calc(14px + env(safe-area-inset-bottom)); z-index: 180;
  border-radius: 999px; background: var(--surface); padding: 7px; border: 1px solid var(--border);
}
.floating-create-btn {
  width: 58px; height: 58px; border-radius: 50%;
  display: grid; place-items: center; text-decoration: none; font-size: 2rem; color: #fff;
  background: linear-gradient(135deg, #ff7a18, #ff9a3d);
}

.action-modal { position: fixed; inset: 0; display: none; place-items: center; background: rgba(4,8,18,.55); z-index: 300; }
.action-modal.visible { display: grid; }
.action-modal-sheet {
  width: min(860px, 96vw);
  height: min(90vh, 840px);
  background: var(--surface-strong);
  border: 1px solid var(--border);
  border-radius: 18px;
  overflow: hidden;
  display: grid;
  grid-template-rows: auto 1fr;
}
.action-modal-header { padding: 10px 12px; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid var(--border); }
.action-modal-header h3 { margin: 0; }
.action-modal-close { background: transparent; border: 0; color: var(--text-primary); font-size: 1.1rem; cursor: pointer; }
.action-modal iframe { width: 100%; height: 100%; border: 0; background: transparent; }

.center-page { min-height: 100vh; display: grid; place-items: center; padding: 16px; }
.center-card { width: min(480px, 100%); }
.form-error {
  border: 1px solid rgba(255,95,109,.4);
  background: rgba(255,95,109,.15);
  color: #ffd4da;
  border-radius: 12px;
  padding: 10px;
}

.profile-details { list-style: none; margin: 0; padding: 0; display: grid; gap: 8px; grid-template-columns: repeat(auto-fit,minmax(220px,1fr)); }
.profile-details li, .detail-row { padding: 9px 10px; display: flex; justify-content: space-between; gap: 8px; }

.dynamic-select-group { display: grid; gap: 8px; }
.dynamic-select-row { display: grid; grid-template-columns: 1fr auto; gap: 8px; }

.hours-cell { position: relative; text-align: center; }
.hours-tooltip {
  position: absolute; left: 50%; transform: translateX(-50%) translateY(6px);
  bottom: calc(100% + 10px); width: min(320px, 82vw);
  border: 1px solid var(--border); background: var(--surface-strong); border-radius: 10px; padding: 8px;
  opacity: 0; visibility: hidden; pointer-events: none;
}
.hours-cell:hover .hours-tooltip { opacity: 1; visibility: visible; transform: translateX(-50%) translateY(0); }

.modal-form-layout .top-nav,
.modal-form-layout .side-nav,
.modal-form-layout .side-nav-overlay,
.modal-form-layout .floating-create-wrap { display: none !important; }
.modal-form-layout .main-content { margin: 0; max-width: none; padding: 12px; }
.modal-form-card { max-width: 900px; margin: 0 auto; }
.modal-form-content { width: 100%; }

@media (max-width: 1023px) {
  .main-content { margin-top: 84px; }
}

@media (min-width: 1024px) {
  .mobile-nav-toggle { display: none; }
  .side-nav { transform: translateX(0); width: 290px; }
  .side-nav-overlay { display: none; }
  .top-nav { left: 290px; }
  .main-content { max-width: none; margin-left: 306px; margin-right: 16px; }
}

@media (max-width: 760px) {
  .form-grid, .form-grid-edit, .timesheet-form { grid-template-columns: 1fr; }
  .btn { width: 100%; }
  .table-actions .btn, .filter-actions .btn { width: auto; }
  .dynamic-select-row { grid-template-columns: 1fr; }
  .assignment-head { flex-direction: column; align-items: flex-start; }
  .action-modal-sheet { width: 100vw; height: 100vh; border-radius: 0; }
}
