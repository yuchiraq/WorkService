@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');

:root {
  --bg: #090b10;
  --bg-grad-a: rgba(255, 122, 24, 0.24);
  --bg-grad-b: rgba(255, 178, 102, 0.18);
  --surface: rgba(17, 20, 29, 0.62);
  --surface-strong: rgba(28, 33, 45, 0.78);
  --surface-soft: rgba(255, 255, 255, 0.05);
  --border: rgba(255, 255, 255, 0.14);
  --text-primary: #f7f8fc;
  --text-secondary: #b3bbcc;
  --accent: #ff7a18;
  --accent-soft: rgba(255, 122, 24, 0.18);
  --danger: #ff5f6d;
  --success: #3ddc97;
  --shadow: 0 20px 60px rgba(2, 5, 12, 0.45);
  --radius: 18px;
  --blur: 22px;
}

@media (prefers-color-scheme: light) {
  :root {
    --bg: #f5f7fb;
    --bg-grad-a: rgba(255, 122, 24, 0.2);
    --bg-grad-b: rgba(255, 182, 122, 0.24);
    --surface: rgba(255, 255, 255, 0.76);
    --surface-strong: rgba(255, 255, 255, 0.94);
    --surface-soft: rgba(255, 255, 255, 0.6);
    --border: rgba(123, 134, 158, 0.22);
    --text-primary: #121722;
    --text-secondary: #4f5b73;
    --shadow: 0 18px 45px rgba(69, 84, 115, 0.16);
  }
}

* { box-sizing: border-box; }
html, body { margin: 0; min-height: 100%; }
body {
  font-family: Inter, system-ui, sans-serif;
  color: var(--text-primary);
  background: var(--bg);
}

a { color: inherit; text-decoration: none; }
.container { max-width: 1200px; margin: 0 auto; padding: 0 clamp(14px, 2vw, 24px); }
.main-content {
  margin: 96px auto 24px;
  padding: clamp(10px, 1.2vw, 16px) clamp(14px, 2vw, 24px) 24px;
  max-width: 1200px;
  display: grid;
  gap: 16px;
}

.top-nav {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: 100;
  backdrop-filter: blur(var(--blur));
  -webkit-backdrop-filter: blur(var(--blur));
  background: var(--surface);
  border-bottom: 1px solid var(--border);
}
.nav-inner {
  min-height: 74px;
  display: grid;
  grid-template-columns: 1fr;
  align-items: center;
  gap: 12px;
}
.top-nav-title { margin: 0; font-size: clamp(1.1rem, 2vw, 1.55rem); font-weight: 700; cursor: pointer; width: fit-content; }
.top-nav-title:focus-visible { outline: 2px solid rgba(255,122,24,.6); outline-offset: 2px; border-radius: 8px; }


.side-nav-overlay {
  position: fixed; inset: 0; z-index: 110;
  background: rgba(0,0,0,.38); opacity: 0; pointer-events: none;
  transition: .2s;
}
.side-nav {
  position: fixed;
  inset: 0 auto 0 0;
  width: min(88vw, 320px);
  z-index: 120;
  padding: 16px;
  transform: translateX(-105%);
  transition: .22s ease;
  display: grid;
  grid-template-rows: auto auto 1fr auto;
  gap: 12px;
  background: var(--surface);
  border-right: 1px solid var(--border);
  backdrop-filter: blur(calc(var(--blur) + 4px));
}
body.nav-open .side-nav { transform: translateX(0); }
body.nav-open .side-nav-overlay { opacity: 1; pointer-events: auto; }

.side-nav-brand { display: flex; align-items: center; gap: 10px; font-weight: 800; }
.side-nav-brand img { width: 34px; height: 34px; }
.side-nav-user {
  display: flex; align-items: center; gap: 10px; text-decoration: none;
  background: var(--surface-soft); border: 1px solid var(--border); border-radius: 14px; padding: 10px;
}
.user-avatar, .worker-avatar {
  width: 38px; height: 38px; border-radius: 50%;
  display: grid; place-items: center; font-weight: 700;
  background: var(--surface-strong);
  border: 1px solid var(--border);
}
.side-nav-links { display: grid; gap: 6px; align-content: start; overflow: auto; }
.nav-link {
  text-decoration: none;
  color: var(--text-secondary);
  border-radius: 12px;
  padding: 11px 12px;
  font-weight: 600;
  border: 1px solid transparent;
}
.nav-link:hover, .nav-link.active {
  color: var(--text-primary);
  background: var(--accent-soft);
  border-color: rgba(255,122,24,.38);
}


.card, .worker-card, .info-card, .placeholder-card, .table-row, .center-card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  backdrop-filter: blur(var(--blur));
  -webkit-backdrop-filter: blur(var(--blur));
}
.card, .worker-card, .info-card, .placeholder-card, .timesheet-card { padding: clamp(14px, 2vw, 20px); }

.page-header, .card-header, .profile-header-container, .worker-card-header { display: flex; gap: 10px; align-items: center; justify-content: space-between; flex-wrap: wrap; }
.page-header h1, .center-card h2 { margin: 0; font-size: clamp(1.2rem, 3vw, 1.8rem); }
.card-header { margin-bottom: 8px; }

.metric { padding: 12px; border-radius: 14px; background: var(--surface-soft); border: 1px solid var(--border); }
.metric .label { color: var(--text-secondary); font-size: .8rem; }
.metric .value { font-size: clamp(1.2rem, 3vw, 1.9rem); font-weight: 800; }
.metric .trend.up { color: var(--success); }
.metric .trend.down { color: var(--danger); }

.form-grid, .form-grid-edit, .timesheet-form, .workers-grid, .compact-grid { display: grid; gap: 12px; }
.form-grid, .form-grid-edit, .timesheet-form { grid-template-columns: repeat(2, minmax(0,1fr)); }
.workers-grid, .compact-grid { grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); }
.form-group, .form-group-edit, .timesheet-span-2 { display: flex; flex-direction: column; gap: 6px; }
.timesheet-span-2 { grid-column: 1 / -1; }

input, select, textarea, .form-control {
  width: 100%;
  background: var(--surface-strong);
  color: var(--text-primary);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 11px 12px;
}
input:focus, select:focus, textarea:focus {
  outline: none;
  border-color: rgba(255,122,24,.55);
  box-shadow: 0 0 0 4px rgba(255,122,24,.18);
}

.btn {
  display: inline-flex; align-items: center; justify-content: center;
  text-decoration: none; gap: 6px;
  border-radius: 12px;
  border: 1px solid var(--border);
  padding: 10px 14px;
  font-weight: 700;
  cursor: pointer;
}
.btn-primary { background: var(--accent); border-color: transparent; color: #fff; }
.btn-secondary { background: var(--surface-soft); color: var(--text-primary); }
.btn-danger { background: var(--danger); border-color: transparent; color: #fff; }
.btn-mini { padding: 8px 10px; }

.table-scroll, .timesheet-table-wrap { overflow: auto; border-radius: 14px; }
.table, .timesheet-matrix { width: 100%; border-collapse: separate; border-spacing: 0 8px; }
.table th, .table td, .timesheet-matrix th, .timesheet-matrix td { padding: 9px 10px; font-size: .92rem; }
.table tbody tr, .timesheet-matrix tr { background: var(--surface-soft); }

.status-badge { display: inline-flex; align-items: center; gap: 6px; border-radius: 999px; padding: 5px 10px; font-size: .76rem; }
.status-badge.active, .status-badge.online { background: rgba(61,220,151,.16); color: var(--success); }
.status-badge.offline { background: rgba(255,95,109,.16); color: var(--danger); }
.status-badge.warning { background: rgba(255,122,24,.16); color: var(--accent); }

.schedule-day-group, .assignment-card, .structured-assignment, .assignment-meta, .assignment-note, .detail-row {
  border: 1px solid var(--border);
  background: var(--surface-soft);
  border-radius: 14px;
}
.schedule-day-group { padding: 10px; display: grid; gap: 10px; }
.schedule-day-list, .schedule-vertical, .dashboard-stats { display: grid; gap: 10px; }
.assignment-card, .structured-assignment { padding: 12px; }
.assignment-head { display: flex; justify-content: space-between; gap: 8px; flex-wrap: wrap; }
.assignment-head span { color: var(--accent); font-weight: 700; }
.assignment-meta, .assignment-note { padding: 8px 10px; }
.assignment-meta span, .assignment-note span, .text-muted, .back-link { color: var(--text-secondary); }

.floating-create-wrap {
  position: fixed; right: 14px; bottom: calc(14px + env(safe-area-inset-bottom)); z-index: 180;
  border-radius: 999px; background: var(--surface); padding: 7px; border: 1px solid var(--border);
}
.floating-create-btn {
  width: 58px; height: 58px; border-radius: 50%;
  display: grid; place-items: center; text-decoration: none; font-size: 2rem; color: #fff;
  background: var(--accent);
}

.action-modal { position: fixed; inset: 0; display: none; place-items: center; background: rgba(4,8,18,.48); backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px); z-index: 300; }
.action-modal.visible { display: grid; }
.action-modal-sheet {
  width: min(640px, 96vw);
  height: auto;
  max-height: calc(100dvh - 32px);
  background: var(--surface-strong);
  border: 1px solid var(--border);
  border-radius: 16px;
  box-shadow: var(--shadow);
  overflow: hidden;
  display: grid;
  grid-template-rows: 1fr;
  padding: 12px;
}
.action-modal-header { display: none; }
.action-modal-header h3 { margin: 0; }
.action-modal-close { background: transparent; border: 0; color: var(--text-primary); font-size: 1.1rem; cursor: pointer; }
.action-modal iframe { width: 100%; height: 100%; min-height: min(76vh, 720px); max-height: calc(100dvh - 56px); border: 1px solid var(--border); border-radius: 12px; background: var(--surface); }

.center-page { min-height: 100vh; display: grid; place-items: center; padding: 16px; }
.center-card { width: min(480px, 100%); }
.form-error {
  border: 1px solid rgba(255,95,109,.4);
  background: rgba(255,95,109,.15);
  color: #ffd4da;
  border-radius: 12px;
  padding: 10px;
}

.profile-details { list-style: none; margin: 0; padding: 0; display: grid; gap: 8px; grid-template-columns: repeat(auto-fit,minmax(220px,1fr)); }
.profile-details li, .detail-row { padding: 9px 10px; display: flex; justify-content: space-between; gap: 8px; }

.dynamic-select-group { display: grid; gap: 8px; }
.dynamic-select-row { display: grid; grid-template-columns: 1fr auto; gap: 8px; }
.timesheet-form .dynamic-select-row { grid-template-columns: 1fr auto; }
.timesheet-form .btn-mini { width: 42px; min-width: 42px; padding: 8px 0; }

.hours-cell { position: relative; text-align: center; }
.hours-tooltip {
  position: absolute; left: 50%; transform: translateX(-50%) translateY(6px);
  bottom: calc(100% + 10px); width: min(320px, 82vw);
  border: 1px solid var(--border); background: var(--surface-strong); border-radius: 10px; padding: 8px;
  opacity: 0; visibility: hidden; pointer-events: none;
}
.hours-cell:hover .hours-tooltip { opacity: 1; visibility: visible; transform: translateX(-50%) translateY(0); }

.modal-form-layout .top-nav,
.modal-form-layout .side-nav,
.modal-form-layout .side-nav-overlay,
.modal-form-layout .floating-create-wrap { display: none !important; }
.modal-form-layout .main-content { margin: 0; max-width: none; padding: 12px; }
.modal-form-card { max-width: 900px; margin: 0 auto; }
.modal-form-content { width: 100%; }



.workers-search-toggle { margin-bottom: 10px; }
.workers-search-toggle.active { background: var(--accent-soft); border-color: rgba(255,122,24,.38); }
.workers-filters { display: none; margin-bottom: 10px; }
.workers-filters.is-open { display: grid; }
.workers-summary { margin: 0 0 12px; }

.worker-card-link-wrapper { text-decoration: none; }
.worker-card { display: grid; gap: 12px; min-height: 172px; grid-template-rows: 1fr auto; }
.worker-card-header { align-items: flex-start; }
.worker-info h3 { margin: 0 0 4px; font-size: 1.05rem; min-height: 2.7em; line-height: 1.35; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
.worker-info p { margin: 0; color: var(--text-secondary); }
.worker-card-footer { display: flex; justify-content: flex-end; margin-top: auto; }

.profile-header { align-items: center; }
.profile-header .worker-avatar { width: 52px; height: 52px; font-size: 1rem; }
.profile-details svg { width: 16px; height: 16px; flex-shrink: 0; opacity: .82; }
.profile-details li { align-items: center; }

.card > * + *, .info-card > * + *, .placeholder-card > * + * { margin-top: 14px; }
.assignment-body > * + * { margin-top: 8px; }
.card p, .placeholder-card p, .info-card p { margin: 0; }
.center-card form { display: grid; gap: 12px; }
.form-actions, .form-actions-edit, .filter-actions, .table-actions { display: flex; flex-wrap: wrap; gap: 8px; }

.action-modal {
  position: fixed; inset: 0; display: none; place-items: center;
  background: rgba(4,8,18,.46);
  backdrop-filter: blur(9px);
  -webkit-backdrop-filter: blur(9px);
  z-index: 300;
}

.modal {
  position: fixed;
  inset: 0;
  z-index: 320;
  display: none;
  align-items: center;
  justify-content: center;
  background: rgba(4,8,18,.46);
  backdrop-filter: blur(9px);
  -webkit-backdrop-filter: blur(9px);
  padding: 16px;
}
.modal-content {
  width: min(560px, 100%);
  background: var(--surface-strong);
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: 18px;
  box-shadow: var(--shadow);
}
.close-button { float: right; cursor: pointer; font-size: 1.4rem; line-height: 1; }

.modal-form-layout .main-content { margin: 0; max-width: none; padding: 14px; gap: 0; }
.modal-form-layout .modal-form-card {
  max-width: 860px;
  margin: 0 auto;
  background: transparent;
  border: 0;
  box-shadow: none;
  backdrop-filter: none;
  padding: 0;
}
.modal-form-layout .modal-form-card > p { margin-top: 0; }
.modal-form-layout .form-grid, .modal-form-layout .form-grid-edit, .modal-form-layout .timesheet-form { gap: 10px; }




/* Glow interactions */
.btn, .nav-link, .worker-card, .info-card, .card, .placeholder-card, .assignment-card, .structured-assignment {
  transition: box-shadow .24s ease, border-color .24s ease, transform .24s ease, background-color .24s ease;
}
.btn:hover, .btn:focus-visible {
  box-shadow: 0 0 0 1px rgba(255,122,24,.34), 0 0 18px rgba(255,122,24,.26);
  border-color: rgba(255,122,24,.46);
}
.btn-primary:hover, .btn-primary:focus-visible {
  box-shadow: 0 0 0 1px rgba(255,122,24,.5), 0 0 24px rgba(255,122,24,.34);
}
.nav-link.active, .nav-link:hover {
  box-shadow: inset 0 0 0 1px rgba(255,122,24,.28), 0 0 14px rgba(255,122,24,.18);
}
.worker-card:hover, .info-card:hover, .card:hover, .placeholder-card:hover,
.assignment-card:hover, .structured-assignment:hover {
  transform: translateY(-2px);
  border-color: rgba(255,122,24,.35);
  box-shadow: 0 0 0 1px rgba(255,122,24,.20), 0 10px 30px rgba(0,0,0,.32), 0 0 20px rgba(255,122,24,.14);
}

/* UI refinement overrides */
.entity-link, .back-link { text-decoration: none; }
.table.timesheet-matrix th:first-child,
.table.timesheet-matrix td:first-child,
.timesheet-matrix th:first-child,
.timesheet-matrix td:first-child { text-align: left; }

.hours-cell.empty { position: relative; }
.hours-cell.empty .empty-value { opacity: 1; transition: opacity .18s ease; }
.timesheet-quick-add {
  position: absolute;
  inset: 50% auto auto 50%;
  transform: translate(-50%, -50%) scale(.88);
  opacity: 0;
  width: 28px;
  height: 28px;
  border-radius: 999px;
  display: grid;
  place-items: center;
  background: var(--accent);
  color: #fff;
  font-weight: 700;
  transition: opacity .18s ease, transform .18s ease;
}
.hours-cell.empty:hover .empty-value { opacity: 0; }
.hours-cell.empty:hover .timesheet-quick-add { opacity: 1; transform: translate(-50%, -50%) scale(1); }

.details-list, .schedule-day-list, .schedule-vertical, .assignment-body, .info-card-actions { display: grid; gap: 10px; }
.object-card .info-card-header, .assignment-head { margin-bottom: 8px; }

.action-modal {
  opacity: 0;
  visibility: hidden;
  transition: opacity .24s ease, visibility .24s ease;
}
.action-modal.visible { opacity: 1; visibility: visible; }
.action-modal-sheet {
  width: min(640px, 96vw);
  height: auto;
  max-height: calc(100dvh - 32px);
  padding: 12px;
  border-radius: 16px;
  transform: translateY(16px) scale(.98);
  transition: transform .28s cubic-bezier(.2,.8,.2,1), opacity .28s ease;
  opacity: .01;
}
.action-modal.visible .action-modal-sheet { transform: translateY(0) scale(1); opacity: 1; }
.action-modal iframe { min-height: min(76vh, 720px); max-height: calc(100dvh - 56px); border: 1px solid var(--border); border-radius: 12px; }

.modal {
  animation: modalOverlayIn .24s ease;
}
.modal-content {
  animation: modalSheetIn .28s cubic-bezier(.2,.8,.2,1);
}
@keyframes modalOverlayIn { from { opacity: 0; } to { opacity: 1; } }
@keyframes modalSheetIn { from { opacity: 0; transform: translateY(14px) scale(.97); } to { opacity: 1; transform: translateY(0) scale(1); } }

@media (max-width: 1023px) {
  .main-content { margin-top: 84px; }
}

@media (min-width: 1024px) {
  .side-nav { transform: translateX(0); width: 290px; }
  .side-nav-overlay { display: none; }
  .top-nav { left: 290px; }
  .main-content { max-width: none; margin-left: 306px; margin-right: 16px; }
}

@media (max-width: 760px) {
  .form-grid, .form-grid-edit, .timesheet-form { grid-template-columns: 1fr; }
  .btn { width: 100%; }
  .table-actions .btn, .filter-actions .btn { width: auto; }
  .dynamic-select-row { grid-template-columns: 1fr; }
  .timesheet-form .dynamic-select-row { grid-template-columns: 1fr auto; }
  .timesheet-form .btn-mini { width: 42px; }
  .assignment-head { flex-direction: column; align-items: flex-start; }
  .action-modal-sheet { width: min(96vw, 640px); max-height: calc(100dvh - 20px); border-radius: 14px; padding: 10px; }
}
