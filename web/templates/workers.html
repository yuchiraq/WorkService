{{define "content"}}
<div class="container">
    <div class="page-header">
        <h1>Работники</h1>
        <a href="/workers/new" class="btn btn-primary">Добавить работника</a>
    </div>

    <div class="worker-list">
        {{range .workers}}
        <div class="worker-card">
            <div class="worker-avatar">{{.FirstName | slice 0 1}}{{.LastName | slice 0 1}}</div>
            <div class="worker-info">
                <h3>{{.FirstName}} {{.LastName}}</h3>
                <p>{{.Position}}</p>
                <span>Ставка не указана</span>
            </div>
            <div class="worker-actions">
                <a href="/workers/edit/{{.ID}}" class="btn btn-secondary">Редакт.</a>
                <a href="#" class="btn btn-danger" onclick="confirmDelete('{{.ID}}'); return false;">Уволить</a>
            </div>
        </div>
        {{else}}
            <p>Работники не найдены. <a href="/workers/new">Добавьте первого!</a></p>
        {{end}}
    </div>
</div>

<script>
function confirmDelete(workerId) {
    if (confirm("Вы уверены, что хотите уволить этого работника?")) {
        // Create a form and submit it programmatically
        let form = document.createElement('form');
        form.method = 'POST';
        form.action = '/workers/delete/' + workerId;
        document.body.appendChild(form);
        form.submit();
    }
}
</script>
{{end}}
