# Авалонстрой - Система Управления

Это веб-приложение для внутреннего использования в компании "Авалонстрой". Оно предназначено для управления основными рабочими процессами: учет сотрудников, управление объектами, составление расписаний и т.д.

## Архитектура

Проект построен на языке Go с использованием фреймворка Gin для бэкенда и стандартных HTML/CSS для фронтенда. Ключевой особенностью является гибридный подход к рендерингу HTML.

### Структура проекта:

```
/
├── cmd/server/main.go      # Главный файл, точка входа приложения
├── internal/               # Внутренняя логика приложения
│   ├── api/                # Обработчики HTTP-запросов (контроллеры)
│   ├── models/             # Структуры данных (Worker, User и т.д.)
│   ├── router/             # Настройка и регистрация всех роутов
│   └── storage/            # Логика доступа к данным (взаимодействие с "базой данных")
├── storage/                # "База данных" в виде JSON файлов
│   ├── users.json
│   └── workers.json
├── web/                    # Файлы фронтенда
│   ├── static/             # Статические файлы (CSS, изображения)
│   └── templates/          # HTML-шаблоны для простых страниц
├── go.mod                  # Файл зависимостей Go
└── README.md               # Этот файл
```

### Бэкенд (Go)

-   **`cmd/server/main.go`**: Точка входа в приложение. Инициализирует веб-сервер Gin и настраивает роутинг.
-   **`internal/router/router.go`**: Определяет все эндпоинты (URL-адреса) приложения и связывает их с соответствующими функциями-обработчиками из пакета `api`.
-   **`internal/api/*.go`**: Содержит логику обработки HTTP-запросов. Этот пакет использует **гибридный подход**:
    -   Для сложных, динамически генерируемых страниц (список работников, профиль работника) HTML-код создается **вручную** внутри функций-обработчиков. Это позволяет избежать проблем со стандартным шаблонизатором и дает полный контроль над итоговым HTML.
    -   Для простых страниц (формы добавления/редактирования) используется стандартный шаблонизатор Gin `c.HTML()`.
-   **`internal/storage/storage.go`**: Абстрагирует работу с данными. На данный момент он читает и пишет данные в JSON-файлы.
-   **`internal/models/models.go`**: Определяет основные структуры данных, такие как `Worker` и `User`.

### Фронтенд и Генерация HTML

Вместо того чтобы полагаться исключительно на стандартный шаблонизатор Go (`html/template`), проект использует два подхода:

1.  **Ручная генерация HTML в Go**: Для страниц, требующих сложной логики отображения данных (например, `/workers` и `/worker/:id`), HTML-код генерируется как строка прямо в Go коде. Данные безопасно вставляются с помощью `fmt.Sprintf` и `template.HTMLEscapeString`.

2.  **Стандартные шаблоны**: Для простых страниц, таких как формы, по-прежнему используются файлы из `web/templates/` и функция `c.HTML()`. Это позволяет быстро создавать страницы, не требующие сложной логики.

Такой подход был выбран для решения проблем с производительностью и сложностью вложенных шаблонов, которые возникли на ранних этапах разработки.

### Хранение данных

Приложение не использует настоящую базу данных. Вместо этого оно хранит данные в JSON-файлах в директории `/storage` (`users.json`, `workers.json`).

### Как запустить проект

1.  Убедитесь, что у вас установлен Go (версия 1.18 или выше).
2.  Откройте терминал в корневой директории проекта.
3.  Выполните команду `go run cmd/server/main.go`.
4.  Сервер запустится на порту `8099`.
5.  Откройте в браузере `http://localhost:8099`.
