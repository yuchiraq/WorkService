# Авалонстрой - Система Управления

Это веб-приложение для внутреннего использования в компании "Авалонстрой". Оно предназначено для управления основными рабочими процессами: учет сотрудников, управление объектами, составление расписаний и т.д.

## Архитектура

Проект построен на языке Go с использованием фреймворка Gin для бэкенда и стандартных HTML/CSS/JS для фронтенда.

### Структура проекта:

```
/
├── cmd/server/main.go      # Главный файл, точка входа приложения
├── internal/               # Внутренняя логика приложения
│   ├── api/                # Обработчики HTTP-запросов (контроллеры)
│   ├── models/             # Структуры данных (Worker, User и т.д.)
│   ├── router/             # Настройка и регистрация всех роутов
│   └── storage/            # Логика доступа к данным (взаимодействие с "базой данных")
├── storage/                # "База данных" в виде JSON файлов
│   ├── users.json
│   └── workers.json
├── web/                    # Файлы фронтенда
│   ├── static/             # Статические файлы (CSS, изображения)
│   └── templates/          # HTML-шаблоны
├── go.mod                  # Файл зависимостей Go
└── README.md               # Этот файл
```

### Бэкенд (Go)

-   **`cmd/server/main.go`**: Это точка входа в приложение. Здесь инициализируется веб-сервер Gin, загружаются начальные данные и настраиваются функции для шаблонов.
-   **`internal/router/router.go`**: Здесь определяются все эндпоинты (URL-адреса) приложения и связываются с соответствующими функциями-обработчиками из пакета `api`.
-   **`internal/api/*.go`**: Эти файлы содержат логику обработки HTTP-запросов. Они получают данные из `storage`, обрабатывают их и передают в HTML-шаблоны для отображения.
-   **`internal/storage/storage.go`**: Этот пакет абстрагирует работу с данными. На данный момент он читает и пишет данные в JSON-файлы в директории `/storage`.
-   **`internal/models/models.go`**: Определяет основные структуры данных, используемые в приложении, такие как `Worker` и `User`.

### Фронтенд и Шаблонизатор

Приложение использует стандартный шаблонизатор Go, предоставляемый фреймворком Gin.

-   **`web/templates/*.html`**: Каждый файл является полноценной HTML-страницей. Общие компоненты, такие как навигационная панель, вставляются с помощью `{{template "navigation.html" .}}`.

**Как это работает:**
1.  Обработчик в `internal/api` вызывается, когда пользователь заходит на определенный URL.
2.  Обработчик получает нужные данные (например, список работников из `storage`).
3.  Он вызывает рендеринг соответствующего HTML-шаблона, передавая в него необходимые данные: `c.HTML(http.StatusOK, "workers.html", gin.H{...})`.
4.  Движок шаблонов Go рендерит указанный HTML-файл. Если в шаблоне есть вставки `{{template "..." .}}`, он рекурсивно рендерит и их.

### Хранение данных

На данный момент приложение не использует настоящую базу данных. Вместо этого при запуске оно загружает данные из JSON-файлов в директории `/storage`:
-   `storage/users.json`
-   `storage/workers.json`

Пакет `internal/storage` предоставляет функции для чтения и записи этих данных в память.

### Как запустить проект

1.  Убедитесь, что у вас установлен Go.
2.  Откройте терминал в корневой директории проекта.
3.  Выполните команду `go run cmd/server/main.go`.
4.  Сервер запустится на порту `8099`.
5.  Откройте в браузере `http://localhost:8099`.
