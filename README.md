# Авалонстрой - Система Управления

Это веб-приложение для внутреннего использования в компании "Авалонстрой". Оно предназначено для управления основными рабочими процессами: учет сотрудников, управление объектами, составление расписаний и т.д.

## Архитектура

Проект построен на языке Go с использованием фреймворка Gin для бэкенда и стандартных HTML/CSS для фронтенда.

### Структура проекта:

```
/
├── cmd/server/main.go      # Главный файл, точка входа приложения
├── internal/               # Внутренняя логика приложения
│   ├── api/                # Обработчики HTTP-запросов (контроллеры)
│   │   └── workers.go
│   ├── models/             # Структуры данных (Worker, User и т.д.)
│   │   └── models.go
│   ├── router/             # Настройка и регистрация всех роутов
│   │   └── router.go
│   └── storage/            # Логика доступа к данным (взаимодействие с "базой данных")
│       └── storage.go
├── storage/                # "База данных" в виде JSON файлов
│   ├── users.json
│   └── workers.json
├── web/                    # Файлы фронтенда
│   ├── static/             # Статические файлы (CSS, изображения)
│   │   ├── css/styles.css
│   │   └── img/logo.svg
│   └── templates/          # HTML-шаблоны
│       ├── layout.html     # Главный макет страницы
│       ├── sidebar.html    # Боковая панель навигации
│       ├── login.html      # Страница входа
│       ├── workers.html    # Страницы контента...
│       └── ...
├── go.mod                  # Файл зависимостей Go
└── README.md               # Этот файл
```

### Бэкенд (Go)

-   **`cmd/server/main.go`**: Это точка входа в приложение. Здесь инициализируется веб-сервер Gin, загружаются начальные данные и, что самое важное, настраивается **кастомный загрузчик HTML-шаблонов**.
-   **`internal/router/router.go`**: Здесь определяются все эндпоинты (URL-адреса) приложения (например, `/workers`, `/login`) и связываются с соответствующими функциями-обработчиками из пакета `api`.
-   **`internal/api/*.go`**: Эти файлы содержат логику обработки HTTP-запросов. Например, `workers.go` отвечает за отображение списка работников, показ форм для их добавления и редактирования. Функции в этом пакете получают данные из `storage`, обрабатывают их и передают в HTML-шаблоны для отображения.
-   **`internal/storage/storage.go`**: Этот пакет абстрагирует работу с данными. На данный момент он читает и пишет данные в JSON-файлы в директории `/storage`. В будущем его можно будет заменить на реальную базу данных (например, PostgreSQL), не меняя при этом код в `api`.
-   **`internal/models/models.go`**: Определяет основные структуры данных, используемые в приложении, такие как `Worker` и `User`.

### Фронтенд и Шаблонизатор

Приложение использует кастомную систему шаблонов на Go, которая позволяет "собирать" страницы из нескольких частей.

-   **`web/templates/layout.html`**: Это основной "каркас" для всех страниц приложения (кроме страницы входа). Он включает в себя общую структуру (`<head>`, `<body>`), стили и боковую панель.
-   **`web/templates/sidebar.html`**: Шаблон боковой навигационной панели. Он вставляется в `layout.html`.
-   **Контентные файлы (`workers.html`, `dashboard.html` и т.д.)**: Эти файлы содержат только уникальный контент для конкретной страницы (внутри блока `{{define "content"}}...{{end}}`).

**Как это работает:**
1.  Обработчик в `internal/api` (например, `WorkersPage`) вызывается, когда пользователь заходит на `/workers`.
2.  Обработчик получает нужные данные (например, список работников из `storage`).
3.  Он вызывает рендеринг шаблона: `c.HTML(http.StatusOK, "layout.html", gin.H{...})`.
4.  Важно: он всегда рендерит **`layout.html`**, а в передаваемых данных указывает, какой контентный файл нужно вставить в основную часть: `"content": "workers.html"`.
5.  Движок шаблонов Go сначала загружает `layout.html`, видит в нем `{{template "content" .}}` и вставляет на это место отрендеренное содержимое из файла, указанного в `content` (в данном случае `workers.html`).
6.  Таким образом, финальная HTML-страница динамически собирается из общего макета и уникального контента.

### Хранение данных

На данный момент приложение не использует настоящую базу данных. Вместо этого при запуске оно загружает данные из JSON-файлов в директории `/storage`:
-   `storage/users.json`
-   `storage/workers.json`

Пакет `internal/storage` предоставляет функции для чтения и записи этих данных в память. Это удобно для разработки и тестирования.

### Как запустить проект

1.  Убедитесь, что у вас установлен Go.
2.  Откройте терминал в корневой директории проекта.
3.  Выполните команду `go run cmd/server/main.go`.
4.  Сервер запустится на порту `8099`.
5.  Откройте в браузере `http://localhost:8099`.
